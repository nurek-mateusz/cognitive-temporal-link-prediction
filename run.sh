#!/usr/bin/env bash
set -ex

# compile the code
make

FORGETTING="linear"
TIME_INTERVAL=72
MU=0.5
THETA=0.2
LAMBDA=0.0017857142857142854
UNIT=3600

ALPHA=0.5

TRAINING_DATASET="data/manufacturing-train.csv"
TEST_DATASET="data/manufacturing-test.csv"
ORGINAL_DATASET="data/manufacturing.csv"

COGNITIVE_VECTOR_SUM="results/cogsnet-$FORGETTING-$TIME_INTERVAL-$MU-$THETA-$LAMBDA-$UNIT-sum.csv"
COGNITIVE_VECTOR_AVG="results/cogsnet-$FORGETTING-$TIME_INTERVAL-$MU-$THETA-$LAMBDA-$UNIT-avg.csv"
FINAL_COGSNET_WEIGHTS="results/cogsnet-$FORGETTING-$TIME_INTERVAL-$MU-$THETA-$LAMBDA-$UNIT-weights.csv"

cogsnet-compute.o $FORGETTING $TIME_INTERVAL $MU $THETA $LAMBDA $UNIT $TRAINING_DATASET $RESULT_DIR $COGNITIVE_VECTOR_SUM $COGNITIVE_VECTOR_AVG $FINAL_COGSNET_WEIGHTS

python link_prediction_models.py $ALPHA $TRAINING_DATASET $TEST_DATASET $ORGINAL_DATASET

echo "END"